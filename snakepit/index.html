<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Snakepit</title>
<link rel="stylesheet" type="text/css" href="style.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-2.2.1.min.js"></script>
<script type="text/javascript">
    var ws;
    var playerName;

    $().ready(function () {

        $("#btnConnect").click(function () {
            playerName = $("#playerName").val()
            $("#status").text("connecting...");

            ws = new WebSocket("ws://127.0.0.1:8080/connect");
            ws.onopen = function (){
                $("#status").text("connected to server");
            };
            ws.onerror = function (e) {
                $("#status").text(e.message);
            };
            ws.onmessage = function (e) {
                $("#status").text(e.data);
            };

            $(document).bind("keypress", keyHandler)

        });

        var keyHandler = function (event) {
            var code = event.which ? event.which : event.keyCode;
            if ( code == 13 ) {
                event.preventDefault();
            }
            if (ws && ws.readyState == WebSocket.OPEN) {
                ws.send(code);
            }
            else {
                $("#status").text("Connection is closed");
            }
        };

        $("#btnDisconnect").click(function () {
            ws.close();
            $(document).unbind("keypress", keyHandler)
        });
    });
</script>
</head>
<body>

<div id="status" style="text-align:left">&nbsp;</div>

<div style="font-size: 3em;">Snakepit</div>
<div>ver 0.1</div>

<div style="margin-top:1em">

<div id="connectForm">
    <span style="color: white">Name</span>
    <input id="playerName" type="text" maxlength="20" />
    <button id="btnConnect">Connect</button>
</div>

</div>

</body>
</html>